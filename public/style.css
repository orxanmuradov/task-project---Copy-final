/* =========================================
   ÃœMUMÄ° SÄ°TÄ°L (APP LAYOUT - FIX HEADER)
   ========================================= */
:root {
    --primary-color: #ffcc00;
    --primary-hover: #e6b800;
    --bg-dark: #121212;
    --bg-card: #1e1e1e;
    --text-light: #ffffff;
    --text-grey: #b3b3b3;
    --danger: #ff4d4d;
    --success: #00e676;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    -webkit-tap-highlight-color: transparent;
}

/* ÆSAS DÆYÄ°ÅÄ°KLÄ°K: Body Scroll-u baÄŸlayÄ±rÄ±q */
body {
    background-color: var(--bg-dark);
    color: var(--text-light);
    display: flex;
    justify-content: center;
    align-items: center; /* MÉ™rkÉ™zlÉ™ÅŸdir */
    height: 100dvh; /* Ekran boyu */
    width: 100vw;
    overflow: hidden; /* SÉ™hifÉ™nin Ã¶zÃ¼ sÃ¼rÃ¼ÅŸmÉ™sin */
    padding: 0; /* MobildÉ™ tam ekran olsun */
}

/* Æsas Qutu - Bu artÄ±q ekranÄ±n 100%-ni tutur (mobildÉ™) */
.container {
    background-color: var(--bg-card);
    width: 100%;
    max-width: 600px; /* KompÃ¼terdÉ™ limit */
    height: 100%;     /* Tam hÃ¼ndÃ¼rlÃ¼k */
    
    display: flex;    /* Flex rejimi */
    flex-direction: column; /* ElementlÉ™ri alt-alta dÃ¼z */
    
    padding: 1.5rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    border-right: 1px solid #333;
    border-left: 1px solid #333;
}

/* Header vÉ™ Tabs - Bunlar "flex-shrink: 0" olacaq, yÉ™ni É™zilmÉ™yÉ™cÉ™k */
.app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    border-bottom: 2px solid var(--primary-color);
    padding-bottom: 10px;
    flex-shrink: 0; /* Yeri sabit qalsÄ±n */
}

.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    border-bottom: 1px solid #333;
    padding-bottom: 5px;
    flex-shrink: 0; /* Yeri sabit qalsÄ±n */
}

/* View Section (TapÅŸÄ±rÄ±qlar vÉ™ ya QeydlÉ™r SÉ™hifÉ™si) */
.view-section {
    display: none; /* JS ilÉ™ aÃ§Ä±lacaq (flex olaraq) */
    flex-direction: column;
    flex: 1;       /* Qalan bÃ¼tÃ¼n yeri tutsun */
    overflow: hidden; /* DaÅŸmasÄ±n */
    min-height: 0; /* Flex scroll Ã¼Ã§Ã¼n vacibdir */
}

/* FORMA (Inputlar) - Bu da sabit qalmalÄ±dÄ±r */
#task-form, #note-form {
    background: #252525;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex-shrink: 0; /* Yeri sabit qalsÄ±n, sÃ¼rÃ¼ÅŸmÉ™sin */
    box-shadow: 0 4px 10px rgba(0,0,0,0.3); /* YÃ¼ngÃ¼l kÃ¶lgÉ™ */
}

/* ğŸš€ ÆSAS HÄ°SSÆ: SÄ°YAHI (Scroll Bura Verilir) ğŸš€ */
#tasks-container, #notes-list {
    flex: 1; /* Qalan bÃ¼tÃ¼n boÅŸluÄŸu tut */
    overflow-y: auto; /* YALNIZ BU HÄ°SSÆ SÃœRÃœÅSÃœN */
    padding-right: 5px; /* Scrollbar Ã¼Ã§Ã¼n yer */
    padding-bottom: 20px;
    
    /* Scrollbar DizaynÄ± */
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) #1e1e1e;
}

/* Scrollbar (Chrome/Safari) */
#tasks-container::-webkit-scrollbar, #notes-list::-webkit-scrollbar { width: 6px; }
#tasks-container::-webkit-scrollbar-thumb, #notes-list::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius: 4px; }

/* DigÉ™r elementlÉ™r (KÃ¶hnÉ™ dizaynlar) */
.main-title { font-size: 1.4rem; color: var(--primary-color); margin: 0; }
.user-info { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-grey); }
#logout-btn { background: #333; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
.tab-btn { flex: 1; background: transparent; color: #888; border: none; padding: 10px; font-size: 1rem; cursor: pointer; border-bottom: 2px solid transparent; }
.tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); font-weight: bold; }

/* Inputlar */
input, select, textarea {
    background-color: #333 !important;
    border: 1px solid #444 !important;
    color: white !important;
    border-radius: 8px;
    padding: 10px;
    font-size: 1rem;
    outline: none;
    width: 100%;
}
input:focus, select:focus { border-color: var(--primary-color) !important; }

.form-row, .date-row { display: flex; gap: 10px; }
.date-group { flex: 1; }
.date-group label { font-size: 0.75rem; color: #888; margin-bottom: 2px; display: block; }

/* DÃ¼ymÉ™lÉ™r */
.add-btn { width: 100%; background-color: var(--primary-color); color: #000; border: none; padding: 12px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; font-weight: bold; }

/* Task List Items */
ul { list-style: none; padding: 0; }
li { background-color: #2a2a2a; padding: 12px; margin-bottom: 8px; border-radius: 10px; border-left: 4px solid var(--primary-color); }
li.task-overdue { border-left-color: var(--danger) !important; background: rgba(255, 77, 77, 0.08); }
.task-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; }
.task-info { flex: 1; word-break: break-word; cursor: pointer; }
.task-info strong { font-size: 1rem; display: block; margin-bottom: 3px; }
.task-meta { font-size: 0.75rem; color: #aaa; display: flex; gap: 8px; align-items: center; }
.actions { display: flex; gap: 10px; align-items: center; }
.check-btn, .delete-btn { background: transparent; border: none; font-size: 1.2rem; cursor: pointer; padding: 5px; }
.check-btn { color: #666; } .check-btn:hover { color: var(--success); } .delete-btn { color: var(--danger); }
li.completed { border-left-color: var(--success); opacity: 0.6; }
li.completed strong { text-decoration: line-through; }

/* Kateqoriyalar */
.category-section { margin-bottom: 15px; }
.category-header { font-size: 1rem; font-weight: bold; color: var(--primary-color); border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 8px; display: flex; justify-content: space-between; }
.count-badge { background: #444; color: white; font-size: 0.75rem; padding: 2px 6px; border-radius: 8px; }

/* Edit & Modal (Sticky) */
.edit-container { display: flex; flex-direction: column; height: 100%; }
.sticky-edit-header { position: sticky; top: 0; z-index: 20; background-color: #2a2a2a; padding-bottom: 10px; border-bottom: 1px solid #333; margin-bottom: 10px; }
.edit-textarea { min-height: 80px; resize: vertical; }
.edit-footer { position: sticky; bottom: 0; z-index: 20; background-color: #2a2a2a; padding-top: 10px; border-top: 1px solid #333; }
.save-btn-small { background-color: var(--primary-color); color: #000; border: none; padding: 10px; border-radius: 8px; font-weight: bold; width: 100%; margin-top: 5px; cursor: pointer; }
.subtask-btn { background-color: #2c2c2c; color: var(--primary-color); border: 1px dashed var(--primary-color); padding: 10px; width: 100%; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 10px; display: flex; justify-content: center; gap: 5px; }

/* Subtasks */
.subtask-container { display: none; margin-top: 5px; padding-left: 10px; border-left: 1px dashed #444; }
.sub-task-item { background: #222; border-left: 2px solid #555 !important; }

/* Modals */
.modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(3px); }
.modal-box { background: #1e1e1e; border: 1px solid var(--primary-color); padding: 20px; border-radius: 12px; width: 90%; max-width: 400px; text-align: center; }
.modal-buttons { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
.modal-btn { flex: 1; padding: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
.modal-btn.save { background: var(--primary-color); color: black; }
.modal-btn.cancel { background: #333; color: white; }
.modal-btn.delete { background: var(--danger); color: white; }

/* Mobile Fixes */
@media (max-width: 600px) {
    .container { border-radius: 0; border: none; height: 100dvh; } /* MobildÉ™ kÃ¼nclÉ™ri dÃ¼z et */
    .form-row, .date-row { flex-direction: column; gap: 8px; }
    .checklist-details-row { flex-direction: column; }
    .cl-date-group, .cl-note { width: 100%; }
}

/* =========================================
   TAMAMLANMIÅ HÆDÆFLÆR (VISUAL)
   ========================================= */

/* AyrÄ±cÄ± XÉ™tt */
.completed-divider {
    text-align: center;
    color: var(--primary-color); /* SarÄ± rÉ™ng */
    margin: 20px 0 10px;
    font-size: 0.9rem;
    font-weight: bold;
    border-top: 2px dashed #444; /* QÄ±rÄ±q xÉ™tt */
    padding-top: 10px;
    opacity: 0.8;
}

/* =========================================
   âœ… HÆDÆFLÆR (CHECKLIST) - DÃœZÆLDÄ°LMÄ°Å DÄ°ZAYN
   ========================================= */

.checklist-item-wrapper {
    background: #252525;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #333;
    margin-bottom: 10px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    transition: 0.3s;
}

/* =========================================
   âš ï¸ GECÄ°KMÆ (OVERDUE) - MÆCBURÄ° QIRMIZI
   ========================================= */

.checklist-item-wrapper.overdue {
    border: 1px solid #ff4d4d !important; /* MÃ¼tlÉ™q qÄ±rmÄ±zÄ± olsun */
    background-color: rgba(255, 77, 77, 0.1) !important; /* YÃ¼ngÃ¼l qÄ±rmÄ±zÄ± fon */
    box-shadow: 0 0 8px rgba(255, 77, 77, 0.3); /* YÃ¼ngÃ¼l parÄ±ltÄ± */
}

/* GecikmÉ™ yazÄ±sÄ± */
.badge-overdue {
    background: #ff4d4d;
    color: white;
    font-size: 0.7rem;
    padding: 3px 8px;
    border-radius: 4px;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
    animation: pulse 2s infinite;
}
}

/* BitmiÅŸ Dizayn */
.checklist-item-wrapper.done {
    opacity: 0.6;
    border-color: var(--success);
    background: rgba(0, 230, 118, 0.05);
}
.checklist-item-wrapper.done span {
    text-decoration: line-through;
    color: #777;
}

/* 1. SÆTÄ°R: Checkbox + YazÄ± + Badge + Sil */
.checklist-main-row {
    display: flex;
    align-items: center; /* ElementlÉ™ri mÉ™rkÉ™zlÉ™ÅŸdir */
    justify-content: space-between;
    width: 100%;
    gap: 10px;
}

.checklist-main-row input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin: 0;
    cursor: pointer;
    flex-shrink: 0; /* SÄ±xÄ±lmasÄ±n */
}

.checklist-main-row span {
    flex: 1; /* YazÄ± boÅŸ qalan yeri tutsun */
    color: white;
    font-size: 1rem;
    word-break: break-word; /* Uzun sÃ¶zlÉ™r sÉ™tri qÄ±rmasÄ±n */
}

.delete-sub-btn {
    background: transparent;
    border: none;
    color: #ff4d4d;
    font-size: 1.1rem;
    cursor: pointer;
    padding: 5px;
    flex-shrink: 0;
    transition: 0.2s;
}
.delete-sub-btn:hover { color: #ff0000; transform: scale(1.1); }

/* GecikmÉ™ Badge */
.badge-overdue {
    background: #ff4d4d;
    color: white;
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap; /* Ä°ki sÉ™trÉ™ dÃ¼ÅŸmÉ™sin */
    flex-shrink: 0;
}

/* 2. SÆTÄ°R: TarixlÉ™r (Yan-yana) */
.checklist-details-row {
    display: flex;
    gap: 10px;
    width: 100%;
}

.cl-date-group {
    flex: 1; /* HÉ™r ikisi bÉ™rabÉ™r yer tutsun */
    display: flex;
    flex-direction: column;
}

.cl-date-label {
    font-size: 0.7rem;
    color: #888;
    margin-bottom: 3px;
    margin-left: 2px;
}

/* Tarix inputlarÄ±nÄ± yÄ±ÄŸcamlaÅŸdÄ±raq */
.cl-date {
    width: 100%;
    padding: 8px !important;
    font-size: 0.85rem !important;
    background-color: #333 !important;
    border: 1px solid #444 !important;
    border-radius: 6px;
    color: white;
}

/* 3. SÆTÄ°R: Qeyd Inputu */
.cl-note {
    width: 100%;
    padding: 8px !important;
    font-size: 0.9rem !important;
    background: transparent !important;
    border: 1px dashed #555 !important;
    color: #ccc !important;
    border-radius: 6px;
    margin-top: 5px;
}
.cl-note:focus { border-color: var(--primary-color) !important; }

/* MobildÉ™ TarixlÉ™r alt-alta keÃ§sin (Ã‡ox sÄ±xÄ±lmasÄ±n) */
@media (max-width: 500px) {
    .checklist-details-row {
        flex-direction: column;
    }
}