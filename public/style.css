/* =========================================
   √úMUMƒ∞ Sƒ∞Tƒ∞L (APP LAYOUT - FIX HEADER)
   ========================================= */
:root {
    --primary-color: #ffcc00;
    --primary-hover: #e6b800;
    --bg-dark: #121212;
    --bg-card: #1e1e1e;
    --text-light: #ffffff;
    --text-grey: #b3b3b3;
    --danger: #ff4d4d;
    --success: #00e676;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    -webkit-tap-highlight-color: transparent;
}

/* ∆èSAS D∆èYƒ∞≈ûƒ∞KLƒ∞K: Body Scroll-u baƒülayƒ±rƒ±q */
body {
    background-color: var(--bg-dark);
    color: var(--text-light);
    display: flex;
    justify-content: center;
    align-items: center; /* M…ôrk…ôzl…ô≈üdir */
    height: 100dvh; /* Ekran boyu */
    width: 100vw;
    overflow: hidden; /* S…ôhif…ônin √∂z√º s√ºr√º≈üm…ôsin */
    padding: 0; /* Mobild…ô tam ekran olsun */
}

/* ∆èsas Qutu - Bu artƒ±q ekranƒ±n 100%-ni tutur (mobild…ô) */
.container {
    background-color: var(--bg-card);
    width: 100%;
    max-width: 600px; /* Komp√ºterd…ô limit */
    height: 100%;     /* Tam h√ºnd√ºrl√ºk */
    
    display: flex;    /* Flex rejimi */
    flex-direction: column; /* Elementl…ôri alt-alta d√ºz */
    
    padding: 1.5rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    border-right: 1px solid #333;
    border-left: 1px solid #333;
}

/* Header v…ô Tabs - Bunlar "flex-shrink: 0" olacaq, y…ôni …ôzilm…ôy…ôc…ôk */
.app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    border-bottom: 2px solid var(--primary-color);
    padding-bottom: 10px;
    flex-shrink: 0; /* Yeri sabit qalsƒ±n */
}

.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    border-bottom: 1px solid #333;
    padding-bottom: 5px;
    flex-shrink: 0; /* Yeri sabit qalsƒ±n */
}

/* View Section (Tap≈üƒ±rƒ±qlar v…ô ya Qeydl…ôr S…ôhif…ôsi) */
.view-section {
    display: none; /* JS il…ô a√ßƒ±lacaq (flex olaraq) */
    flex-direction: column;
    flex: 1;       /* Qalan b√ºt√ºn yeri tutsun */
    overflow: hidden; /* Da≈ümasƒ±n */
    min-height: 0; /* Flex scroll √º√ß√ºn vacibdir */
}

/* FORMA (Inputlar) - Bu da sabit qalmalƒ±dƒ±r */
#task-form, #note-form {
    background: #252525;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex-shrink: 0; /* Yeri sabit qalsƒ±n, s√ºr√º≈üm…ôsin */
    box-shadow: 0 4px 10px rgba(0,0,0,0.3); /* Y√ºng√ºl k√∂lg…ô */
}

/* üöÄ ∆èSAS Hƒ∞SS∆è: Sƒ∞YAHI (Scroll Bura Verilir) üöÄ */
#tasks-container, #notes-list {
    flex: 1; /* Qalan b√ºt√ºn bo≈üluƒüu tut */
    overflow-y: auto; /* YALNIZ BU Hƒ∞SS∆è S√úR√ú≈ûS√úN */
    padding-right: 5px; /* Scrollbar √º√ß√ºn yer */
    padding-bottom: 20px;
    
    /* Scrollbar Dizaynƒ± */
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) #1e1e1e;
}

/* Scrollbar (Chrome/Safari) */
#tasks-container::-webkit-scrollbar, #notes-list::-webkit-scrollbar { width: 6px; }
#tasks-container::-webkit-scrollbar-thumb, #notes-list::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius: 4px; }

/* Dig…ôr elementl…ôr (K√∂hn…ô dizaynlar) */
.main-title { font-size: 1.4rem; color: var(--primary-color); margin: 0; }
.user-info { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-grey); }
#logout-btn { background: #333; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
.tab-btn { flex: 1; background: transparent; color: #888; border: none; padding: 10px; font-size: 1rem; cursor: pointer; border-bottom: 2px solid transparent; }
.tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); font-weight: bold; }

/* Inputlar */
input, select, textarea {
    background-color: #333 !important;
    border: 1px solid #444 !important;
    color: white !important;
    border-radius: 8px;
    padding: 10px;
    font-size: 1rem;
    outline: none;
    width: 100%;
}
input:focus, select:focus { border-color: var(--primary-color) !important; }

.form-row, .date-row { display: flex; gap: 10px; }
.date-group { flex: 1; }
.date-group label { font-size: 0.75rem; color: #888; margin-bottom: 2px; display: block; }

/* D√ºym…ôl…ôr */
.add-btn { width: 100%; background-color: var(--primary-color); color: #000; border: none; padding: 12px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; font-weight: bold; }

/* Task List Items */
ul { list-style: none; padding: 0; }
li { background-color: #2a2a2a; padding: 12px; margin-bottom: 8px; border-radius: 10px; border-left: 4px solid var(--primary-color); }
li.task-overdue { border-left-color: var(--danger) !important; background: rgba(255, 77, 77, 0.08); }
.task-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; }
.task-info { flex: 1; word-break: break-word; cursor: pointer; }
.task-info strong { font-size: 1rem; display: block; margin-bottom: 3px; }
.task-meta { font-size: 0.75rem; color: #aaa; display: flex; gap: 8px; align-items: center; }
.actions { display: flex; gap: 10px; align-items: center; }
.check-btn, .delete-btn { background: transparent; border: none; font-size: 1.2rem; cursor: pointer; padding: 5px; }
.check-btn { color: #666; } .check-btn:hover { color: var(--success); } .delete-btn { color: var(--danger); }
li.completed { border-left-color: var(--success); opacity: 0.6; }
li.completed strong { text-decoration: line-through; }

/* Kateqoriyalar */
.category-section { margin-bottom: 15px; }
.category-header { font-size: 1rem; font-weight: bold; color: var(--primary-color); border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 8px; display: flex; justify-content: space-between; }
.count-badge { background: #444; color: white; font-size: 0.75rem; padding: 2px 6px; border-radius: 8px; }

/* Edit & Modal (Sticky) */
.edit-container { display: flex; flex-direction: column; height: 100%; }
.sticky-edit-header { position: sticky; top: 0; z-index: 20; background-color: #2a2a2a; padding-bottom: 10px; border-bottom: 1px solid #333; margin-bottom: 10px; }
.edit-textarea { min-height: 80px; resize: vertical; }
.edit-footer { position: sticky; bottom: 0; z-index: 20; background-color: #2a2a2a; padding-top: 10px; border-top: 1px solid #333; }
.save-btn-small { background-color: var(--primary-color); color: #000; border: none; padding: 10px; border-radius: 8px; font-weight: bold; width: 100%; margin-top: 5px; cursor: pointer; }
.subtask-btn { background-color: #2c2c2c; color: var(--primary-color); border: 1px dashed var(--primary-color); padding: 10px; width: 100%; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 10px; display: flex; justify-content: center; gap: 5px; }

/* Subtasks */
.subtask-container { display: none; margin-top: 5px; padding-left: 10px; border-left: 1px dashed #444; }
.sub-task-item { background: #222; border-left: 2px solid #555 !important; }

/* Modals */
.modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(3px); }
.modal-box { background: #1e1e1e; border: 1px solid var(--primary-color); padding: 20px; border-radius: 12px; width: 90%; max-width: 400px; text-align: center; }
.modal-buttons { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
.modal-btn { flex: 1; padding: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
.modal-btn.save { background: var(--primary-color); color: black; }
.modal-btn.cancel { background: #333; color: white; }
.modal-btn.delete { background: var(--danger); color: white; }

/* Mobile Fixes */
@media (max-width: 600px) {
    .container { border-radius: 0; border: none; height: 100dvh; } /* Mobild…ô k√ºncl…ôri d√ºz et */
    .form-row, .date-row { flex-direction: column; gap: 8px; }
    .checklist-details-row { flex-direction: column; }
    .cl-date-group, .cl-note { width: 100%; }
}